const playlist = [
  {
    title: "Unknown title",
    artist: "Unknown artist",
    album: "Unknown album",
    src: "music/placeholder.mp3",
    cover: "img/unknown.png",
    lyrics: "<br>",
    background: "linear-gradient(#515151, #212121)",
    lyricsBackground: "#515151"
  },
  {
    title: "OSCAR",
    artist: "🅴 Young Multi, White Widow",
    album: "TOXIC",
    src: "music/oscar.mp3",
    cover: "img/toxic.jpg",
    lyrics: "Cały pachnę stylem to przyciąga twoją hoe<br>Nie chcę słuchać plotek moje życie to real talk<br>Wszędzie drogie ciuchy drogie kurwy drogie flow<br>Przestań moje życie filmy akcji twoje to komedia<br>Złoty chłopak ale nie mam nic z aktora<br>Bez czapy płynę zawsze a należy mi się Oscar<br>",
    background: "linear-gradient(#e81e2a, #212121)",
    lyricsBackground: "#e81e2a"
  },
  {
    title: "BALLADA O SAMOTNOŚCI (vlone)",
    artist: "🅴 Young Multi",
    album: "TOXIC",
    src: "music/ballada-o-samotnosci.mp3",
    cover: "img/toxic.jpg",
    lyrics: "Co to jest miłość?<br>Łzy znowu lecą mi na nowy Vlone na na<br>Do zdjęcia uśmiech a wszystko się zmienia<br>Gdy w pokoju zostaję już tylko sam<br>Na na na na na na<br>Zostaję sam<br>Na na na na na na<br>Zostaję sam<br>Co to jest miłość?<br>",
    background: "linear-gradient(#e81e2a, #212121)",
    lyricsBackground: "#e81e2a"
  },
  {
    title: "ZIOMECZKI ZIOMY",
    artist: "🅴 Young Multi",
    album: "TOXIC",
    src: "music/ziomeczki-ziomy.mp3",
    cover: "img/toxic.jpg",
    lyrics: "Dzwonię do ziomeczków ziomów<br>Dzwonię do ziomeczków ziomów<br>Kiedy potrzebuję brokułów<br>Kiedy nie mają co robić na chacie to gramy tu z nudów yeah<br>Czuję dobry vibe niech tak już będzie bez kłótni i brudów<br>Yeah slatt<br>Dzwonię do dzwonię do ziomeczków ziomów<br>",
    background: "linear-gradient(#e81e2a, #212121)",
    lyricsBackground: "#e81e2a"
  },
  {
    title: "BEKSA",
    artist: "🅴 Young Multi",
    album: "TOXIC",
    src: "music/beksa.mp3",
    cover: "img/toxic.jpg",
    lyrics: "W łapie mam telefon<br>A na koncie trzymam se tysiące<br>Ale martwię się bo jakiś pajac<br>W komentarzu mi napisał że się kończę<br>Co za bezsens<br>Kiedyś marzyłem o tym miejscu w którym dziś jestem<br>Presja mnie wykańcza bo oczekują tu więcej<br>",
    background: "linear-gradient(#e81e2a, #212121)",
    lyricsBackground: "#e81e2a"
  },
  {
    title: "S3N!",
    artist: "🅴 Young Multi",
    album: "TOXIC",
    src: "music/sen.mp3",
    cover: "img/toxic.jpg",
    lyrics: "Ponad chmurami lecę, patrzę znów na ciebie<br>Mogę mieć co chcę, a chcę mieć tylko ciebie<br>Silnik auta ryczy więc, już dobrze wiesz kto jedzie<br>Przejmujemy od was ster, zaczynamy nowy dzień<br>Nowy dzień Boże co za dzień, jeśli to jest sen<br> To proszę nie budź mnie<br>",
    background: "linear-gradient(#e81e2a, #212121)",
    lyricsBackground: "#e81e2a"
  },
  {
    title: "TOXIC LUV",
    artist: "🅴 Young Multi, White 2115",
    album: "TOXIC",
    src: "music/toxic-luv.mp3",
    cover: "img/toxic.jpg",
    lyrics: "W moim sercu pustka<br>Nie mów do mnie skarbie<br>No bo już mnie nie oszukasz<br>Żyję szybko jakby dla mnie już nie było jutra<br>Przestań mnie już szukać<br>Proszę przestań szukać<br>W moim sercu pustka<br>Nie mów do mnie skarbie<br>No bo już mnie nie oszukasz<br>",
    background: "linear-gradient(#e81e2a, #212121)",
    lyricsBackground: "#e81e2a"
  },
  {
    title: "FANTA",
    artist: "🅴 Young Multi, Waima",
    album: "TOXIC",
    src: "music/fanta.mp3",
    cover: "img/toxic.jpg",
    lyrics: "Yeah, yeah, każdy z ziomali jest z innej planety, yeah<br>Cała galaktyka nasza, a niebo fioletowe jest, tak jak Fanta<br>Wyjebałem jak kometa i jestem na topie, a wołają falstart<br>Kokpit zamknięty, niedowiarkom mówię dziś pa-pa (pa-pa)<br>",
    background: "linear-gradient(#e81e2a, #212121)",
    lyricsBackground: "#e81e2a"
  },
  {
    title: "NIGDY NIE ŚPIĘ",
    artist: "🅴 Young Multi",
    album: "TOXIC",
    src: "music/nigdy-nie-spie.mp3",
    cover: "img/toxic.jpg",
    lyrics: "Nigdy uh nigdy nie śpię, 24 gang nie jestem skejtem<br>Nigdy uh nigdy nie śpię, robię tą bi big booty w Benzie<br>Nigdy uh nigdy nie śpię, 24 gang nie jestem skejtem<br>Nigdy uh nigdy nie śpię, robię tą bih big booty w Benzie<br>Nigdy uh<br>Pomimo że piękna pani, to nie mogę gonić za nią tak jak berek<br>Love no thotties jak Keef, ale czasami nie myślę już sercem<br>Suko kim ty jesteś, nie mów do mnie kiedy lecę na wavie<br>Psujesz mi mood, odejdź ode mnie i proszę zrób miejsce<br>Moi ziomale to slimes, ty jesteś fake ty jesteś clown<br>Moi ziomale to slimes, wy macie glock my chcemy funk<br>Moi ziomale to slimes, wpierdala w opps dawaj mi guap<br>Moi ziomale to slimes<br>Moi ziomale to gang gang",
    background: "linear-gradient(#e81e2a, #212121)",
    lyricsBackground: "#e81e2a"
  },
  {
    title: "Charger",
    artist: "🅴 Chivas",
    album: "nauczyłem się przeklinać",
    src: "music/Charger.mp3",
    cover: "img/charger.png",
    lyrics: "Jestem przyjacielem moich zmartwień, ryczałem jak Charger<br>Już nie ma odwrotu, więc przeżyje lub padnę<br>Rzucili nam kolczatkę, zrobiłem z niej parkiet<br>Nie żałuję żadnych krzywd, napisały bajkę",
    background: "linear-gradient(#46ca40, #212121)",
    lyricsBackground: "#46ca40"
  },
  {
    title: "PAMIĘTAM JAK",
    artist: "🅴 Sobel",
    album: "NAPISZ JAK BĘDIESZ",
    src: "music/pamietam-jak.mp3",
    cover: "img/njb.jpg",
    lyrics: "Pamiętam, yeah (Sushi), sushi nad wodą<br>Tylko po to by się potknąć, wylądować u mnie<br>Pamiętam jak (mówisz), że będziesz obok, choćby mierzyli do nas<br>Jesteś gotów dostać kulkę (Jak dobrze wiedzieć, że)<br>Że żyjesz, o żyjesz, o żyjesz, oh yeah<br>(Jak dobrze wiedzieć, że)<br>Że po tym wszystkim nadal budzisz się tak blisko mnie, yeah",
    background: "linear-gradient(#687c8c, #212121)",
    lyricsBackground: "#687c8c"
  }
];



let currentTrackIndex = 0;
let isShuffle = false;
let isLoop = false;

const audio = document.getElementById("audio");
const playBtn = document.getElementById("play");
const prevBtn = document.getElementById("prev");
const nextBtn = document.getElementById("next");
const seekBar = document.getElementById("seek");
const currentTimeElem = document.getElementById("current-time");
const durationElem = document.getElementById("duration");
const titleElem = document.querySelector("h1");
const artistElem = document.querySelector("h2");
const imgElem = document.getElementById("img1");
const odtwarzanie = document.getElementById("head");
const lyrics = document.getElementById("lyrics");
const shuffleBtn = document.getElementById("shuffle");
const loopBtn = document.getElementById("loop");


let isPlaying = false;

function loadTrack(index) {
  const track = playlist[index];
  audio.src = track.src;
  titleElem.textContent = track.title;
  artistElem.textContent = track.artist;
  imgElem.src = track.cover;
  seekBar.value = 0;
  updateSeekBackground();
  currentTimeElem.textContent = "0:00";
  durationElem.textContent = "0:00";
  odtwarzanie.innerHTML = `
    <span id="go-back"><i class="icon-open"></i></span>
    Odtwarzanie z albumu „${track.album}”
    <span id="more"><i class="icon-more"></i></span>
  `;
  document.body.style.background = track.background;
}

function playTrack() {
  audio.play();
  isPlaying = true;
  playBtn.innerHTML = "<i class='icon-pause'></i>";
}

function pauseTrack() {
  audio.pause();
  isPlaying = false;
  playBtn.innerHTML = "<i class='icon-play'></i>";
}

playBtn.addEventListener("click", () => {
  if (isPlaying) {
    pauseTrack();
  } else {
    playTrack();
  }
});

nextBtn.addEventListener("click", () => {
  currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
  loadTrack(currentTrackIndex);
  playTrack();
});

prevBtn.addEventListener("click", () => {
  currentTrackIndex = (currentTrackIndex - 1 + playlist.length) % playlist.length;
  loadTrack(currentTrackIndex);
  playTrack();
});

audio.addEventListener("ended", () => {
  if (isLoop) {
    audio.currentTime = 0;
    playTrack();
  } else if (isShuffle) {
    let newIndex;
    do {
      newIndex = Math.floor(Math.random() * playlist.length);
    } while (newIndex === currentTrackIndex && playlist.length > 1);
    currentTrackIndex = newIndex;
    loadTrack(currentTrackIndex);
    playTrack();
  } else {
    currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
    loadTrack(currentTrackIndex);
    playTrack();
  }
});

audio.addEventListener("timeupdate", () => {
  const percentage = (audio.currentTime / audio.duration) * 100 || 0;
  seekBar.value = percentage;
  updateSeekBackground();
  currentTimeElem.textContent = formatTime(audio.currentTime);
  durationElem.textContent = formatTime(audio.duration);
});

shuffleBtn.addEventListener("click", () => {
  isShuffle = !isShuffle;
  shuffleBtn.querySelector("i").classList.toggle("active", isShuffle);
});

loopBtn.addEventListener("click", () => {
  isLoop = !isLoop;
  loopBtn.querySelector("i").classList.toggle("active", isLoop);
});

seekBar.addEventListener("input", () => {
  audio.currentTime = (seekBar.value / 100) * audio.duration;
  updateSeekBackground();
});

function updateSeekBackground() {
  const value = seekBar.value;
  seekBar.style.background = `linear-gradient(to right, #ededed ${value}%, rgba(237, 237, 237, 0.1) ${value}%)`;
}

function formatTime(time) {
  const minutes = Math.floor(time / 60);
  const seconds = Math.floor(time % 60);
  return `${minutes}:${seconds.toString().padStart(2, "0")}`;
}

document.getElementById("lyrics").addEventListener('click', function()
{
  document.getElementById("lyrics-overlay").classList.toggle('hidden');
})

loadTrack(currentTrackIndex);