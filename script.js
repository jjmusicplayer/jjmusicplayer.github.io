const playlist = [
  {
    title: "Unknown title",
    artist: "Unknown artist",
    album: "Unknown album",
    src: "music/placeholder.mp3",
    cover: "img/unknown.png",
    coverSize: "1000x1000",
    lyrics: "<br>",
    background: "linear-gradient(#515151, #121212)",
    lyricsBackground: "#515151",
    explicit: "0"
  },
  {
    title: "OSCAR",
    artist: "Young Multi, White Widow",
    album: "TOXIC",
    src: "music/oscar.mp3",
    cover: "img/toxic.png",
    coverSize: "1200x1200",
    lyrics: "Cały pachnę stylem to przyciąga twoją hoe<br>Nie chcę słuchać plotek moje życie to real talk<br>Wszędzie drogie ciuchy drogie kurwy drogie flow<br>Przestań moje życie filmy akcji twoje to komedia<br>Złoty chłopak ale nie mam nic z aktora<br>Bez czapy płynę zawsze a należy mi się Oscar<br>Jak wpadają ziomy na crib to powstań<br>Jak wpadają ziomy na crib to powstań<br><br>Od małego chciałem mieć diamenty<br>Zanim zrobiłem je z Bedim czułem się przeklęty<br>Historia znów zatacza koło znowu underrated<br>Ale suko nigdy over nigdy nie odejde<br>Nasz shit fresh to markowy sort<br>Gruby trap CEO big boss jak Rick Ross<br>Ugh smutna bitch ona szuka clout'u<br>Ona zrobi dzisiaj wszystko dla kontraktu<br>Moje ziomy status free agent<br>Robimy to na swoim jebać major label<br>Zobacz tylko jak ten styl wchodzi<br>Mam go dawno suko od narodzin<br>Duże body duże fele<br>Duży ass duży joint no i jest weselej<br>Biały chłopak ale luz mam<br>No i lubię kiedy ona egzotyczna<br><br>Cały pachnę stylem to przyciąga twoją twoją hoe<br>Nie chcę słuchać plotek moje życie to real talk<br>Wszędzie drogie ciuchy drogie kurwy drogie flow<br>Przestań moje życie filmy akcji twoje to komedia<br>Złoty chłopak ale nie mam nic z aktora<br>Bez czapy płynę zawsze a należy mi się Oscar<br>Jak wpadają ziomy na crib to powstań<br>Jak wpadają ziomy na crib to powstań<br><br>One kochają nasz styl chciały być tu z nami<br>Oni chcieli pograć z nami lecz to nie Konami<br>Ma być cuban link wypełniony diamentami (VVS)<br>Egzotyczna hoe chciała byśmy byli sami (yeah)<br>Mała zrobisz team potem możesz sobie iść (to the team)<br>Bitch we 'bout that action nie jesteśmy wannabes (nie)<br>Urodzony na tych blokach lil hood baby shit (okay)<br>Ja liczę na skład dawno już nie liczę liczb (squad)<br>I got the keys mała suko jak Future (jak Future)<br>Ja to nauczyciel ty co najwyżej to uczeń (yeah)<br>Mały ziomie przypominasz troche router (trochę co)<br>Chodzi o router co ma parę zakłóceń (let's go)<br><br>Cały pachnę stylem to przyciąga twoją twoją hoe<br>Nie chcę słuchać plotek moje życie to real talk<br>Wszędzie drogie ciuchy drogie kurwy drogie flow<br>Przestań moje życie filmy akcji twoje to komedia<br>Złoty chłopak ale nie mam nic z aktora<br>Bez czapy płynę zawsze a należy mi się Oscar<br>Jak wpadają ziomy na crib to powstań<br>Jak wpadają ziomy na crib to powstań<br><br>Robię ballin' out suko a to gówno nie dla was (pow pow)<br>Dziwko u mnie nie ma puchy tylko szybko mija czas (mija czas)<br>Mija dwie trzy minuty albo cały kilogram (ay yeah)<br>Benz Benz Gucci Gucci I've been flexin' all the time (Gucci Gucci)<br>Nie podzieli nas suka i nominał (w chuju nominał)<br>W chuju mam wasze opinie was o rady nie pytam<br>Nie chcę słuchać twojej nuty bo się zaraz zerzygam (zerzygam)<br>Ona skacze na giwere ja za włosy ją chwytam (yikes)<br>U mnie balet pełen ziomów a u ciebie jest stypa (huh)<br>Twój ziom faja jebana a się kreuje na gita (okay)<br>Suka udaje doznania bo ledwo co ją dotykasz (pow pow)<br>Ty jesteś pałą do szczania i cała ta twoja klika (pow)<br><br>Cały pachnę stylem to przyciąga twoją twoją hoe<br>Nie chcę słuchać plotek moje życie to real talk<br>Wszędzie drogie ciuchy drogie kurwy drogie flow<br>Przestań moje życie filmy akcji twoje to komedia<br>Złoty chłopak ale nie mam nic z aktora<br>Bez czapy płynę zawsze a należy mi się Oscar<br>Jak wpadają ziomy na crib to powstań<br>Jak wpadają ziomy na crib to powstań<br>",
    background: "linear-gradient(#e81e2a, #121212)",
    lyricsBackground: "#e81e2a",
    explicit: "1"
  },
  {
    title: "BALLADA O SAMOTNOŚCI (vlone)",
    artist: "Young Multi",
    album: "TOXIC",
    src: "music/ballada-o-samotnosci.mp3",
    cover: "img/toxic.png",
    coverSize: "1200x1200",
    lyrics: "Co to jest miłość?<br>Łzy znowu lecą mi na nowy Vlone na na<br>Do zdjęcia uśmiech a wszystko się zmienia<br>Gdy w pokoju zostaję już tylko sam<br>Na na na na na na<br>Zostaję sam<br>Na na na na na na<br>Zostaję sam<br>Co to jest miłość?<br>",
    background: "linear-gradient(#e81e2a, #121212)",
    lyricsBackground: "#e81e2a",
    explicit: "1"
  },
  {
    title: "ZIOMECZKI ZIOMY",
    artist: "Young Multi",
    album: "TOXIC",
    src: "music/ziomeczki-ziomy.mp3",
    cover: "img/toxic.png",
    coverSize: "1200x1200",
    lyrics: "Dzwonię do ziomeczków ziomów<br>Dzwonię do ziomeczków ziomów<br>Kiedy potrzebuję brokułów<br>Kiedy nie mają co robić na chacie to gramy tu z nudów yeah<br>Czuję dobry vibe niech tak już będzie bez kłótni i brudów<br>Yeah slatt<br>Dzwonię do dzwonię do ziomeczków ziomów<br>",
    background: "linear-gradient(#e81e2a, #121212)",
    lyricsBackground: "#e81e2a",
    explicit: "1"
  },
  {
    title: "BEKSA",
    artist: "Young Multi",
    album: "TOXIC",
    src: "music/beksa.mp3",
    cover: "img/toxic.png",
    coverSize: "1200x1200",
    lyrics: "W łapie mam telefon, a na koncie trzymam se tysiące<br>Ale martwię się bo jakiś pajac, w komentarzu mi napisał że się kończę<br>Co za bezsens, kiedyś marzyłem o tym miejscu w którym dziś jestem<br>Presja mnie wykańcza bo oczekują tu więcej, ale jak upadasz kto ci poda rękę<br>Nie chcę wyjść na beksę, ale komu się wypłakać kiedy kłuje serce<br>Tysiące ludzi chce zająć twoje miejsce<br>Tysiące ludzi chce wbijać na backstage'e<br>Daj mi tysiąc miłości albo nic<br>Tym co poszli chuj do dupy albo chuj im w ryj<br>Chcę żebyś przy mnie był nawet kiedy nie mam sił<br>Chcę żebyś przy mnie był nawet kiedy nie mam sił<br><br>Powiedz czego chcesz<br>Popatrz na mnie powiedz „jest okej”<br>Popatrz na mnie powiedz „jest okej”<br>I potem przytul mnie<br>Szepnij mi do ucha „jest okej”<br>Podaj rękę kiedy będzie źle<br>Powiedz czego chcesz<br>Popatrz na mnie powiedz „jest okej”<br>Popatrz na mnie powiedz „jest okej”<br>I potem przytul mnie<br>Szepnij mi do ucha „jest okej”<br>Podaj rękę kiedy będzie źle<br><br>Byłem już na szczycie na dole, na szczycie na dole, na szczycie na dole, na szczycie na dole<br>Jakbyś przeżył rollercoaster na mym miejscu<br>To byś albo nie żył albo zrezygnował już na wejściu<br>Są momenty kiedy chciałem skończyć z tym<br>Ale obiecałem nie dam satysfakcji im<br>Kiedy masz na bani taki syf, ciężko znaleźć siłę mi by do przodu iść<br>By do przodu iść huh<br>By do przodu iść<br>By do przodu iść<br><br>Powiedz czego chcesz<br>Popatrz na mnie powiedz „jest okej”<br>Popatrz na mnie powiedz „jest okej”<br>I potem przytul mnie<br>Szepnij mi do ucha „jest okej”<br>Podaj rękę kiedy będzie źle<br>Powiedz czego chcesz<br>Popatrz na mnie powiedz „jest okej”<br>Popatrz na mnie powiedz „jest okej”<br>I potem przytul mnie<br>Szepnij mi do ucha „jest okej”<br>Podaj rękę kiedy będzie źle<br>Powiedz czego chcesz<br>Popatrz na mnie powiedz „jest okej”<br>Popatrz na mnie powiedz „jest okej”<br>I potem przytul mnie<br>Szepnij mi do ucha „jest okej”<br>Podaj rękę kiedy będzie źle<br>Powiedz czego chcesz<br>Popatrz na mnie powiedz „jest okej”<br>Popatrz na mnie powiedz „jest okej”<br>I potem przytul mnie<br>Szepnij mi do ucha „jest okej”<br>Podaj rękę kiedy będzie źle",
    background: "linear-gradient(#e81e2a, #121212)",
    lyricsBackground: "#e81e2a",
    explicit: "1"
  },
  {
    title: "S3N!",
    artist: "Young Multi",
    album: "TOXIC",
    src: "music/sen.mp3",
    cover: "img/toxic.png",
    coverSize: "1200x1200",
    lyrics: "Ponad chmurami lecę, patrzę znów na ciebie<br>Mogę mieć co chcę, a chcę mieć tylko ciebie<br>Silnik auta ryczy więc, już dobrze wiesz kto jedzie<br>Przejmujemy od was ster, zaczynamy nowy dzień<br>Nowy dzień Boże co za dzień, jeśli to jest sen<br>To proszę nie budź mnie, wielkie marzenia<br>W końcu odnalazłem życia sens, jeśli to jest sen<br>To proszę nie budź mnie, proszę nie budź uh<br><br>Duży check duży flex uh uh<br>Duży hejt mocny seks uh uh<br>Złoty chain nie żaden fake uh uh<br>Jak krzyczę gang to für die Gang<br>Znowu chodzę zamulony, ale nie przez trawę<br>W nocy piszę zwroty, pewnie skończę je nad ranem<br>Ambicje mi nie dają spać (spać)<br>Mały Multi duży świat<br>Mały Multi duży skarb<br>Mały Multi duży bank yeah<br>Presja siada mi na banię, nie chcę już nikogo zawieść<br>Chcę wyjechać gdzieś daleko, szybko jak na autobahnie<br>Chcieli gonić nie dogonią nas, nie nie to ja wolny tak jak ptak<br><br>Ponad chmurami lecę, patrzę znów na ciebie<br>Mogę mieć co chcę, a chcę mieć tylko ciebie<br>Silnik auta ryczy więc, już dobrze wiesz kto jedzie<br>Przejmujemy od was ster, zaczynamy nowy dzień<br>Nowy dzień Boże co za dzień, jeśli to jest sen<br>To proszę nie budź mnie, wielkie marzenia<br>W końcu odnalazłem życia sens, jeśli to jest sen<br>To proszę nie budź mnie, proszę nie budź uh<br><br>Duży check duży flex uh uh<br>Duży hejt mocny seks uh uh<br>Złoty chain nie żaden fake uh uh<br>Jak krzyczę gang to für die Gang<br>Popatrz mi w oczy i złap mnie za rękę, koloruję świat<br>W dłoni trzymasz kolorowe te pędzle, dawno odszedł strach<br>Znowu dożylnie pompujesz mi szczęście, czuję zmęczenie i presję<br>Pomóż mi przeżyć bo sam to nie przejdę, może się uda wydostać nadzieję<br>Huh huh nie chcę być sam<br>Huh huh chcę zatrzymać czas<br>W każdym miejscu mogę być, liczy się gdzie jesteś ty<br><br>Ponad chmurami lecę, patrzę znów na ciebie<br>Mogę mieć co chcę, a chcę mieć tylko ciebie<br>Silnik auta ryczy więc, już dobrze wiesz kto jedzie<br>Przejmujemy od was ster, zaczynamy nowy dzień<br>Nowy dzień Boże co za dzień, jeśli to jest sen<br>To proszę nie budź mnie, wielkie marzenia<br>W końcu odnalazłem życia sens, jeśli jest to sen<br>To proszę nie budź mnie, proszę nie budź",
    background: "linear-gradient(#e81e2a, #121212)",
    lyricsBackground: "#e81e2a",
    explicit: "1"
  },
  {
    title: "TOXIC LUV",
    artist: "Young Multi, White 2115",
    album: "TOXIC",
    src: "music/toxic-luv.mp3",
    cover: "img/toxic.png",
    coverSize: "1200x1200",
    lyrics: "W moim sercu pustka<br>Nie mów do mnie skarbie<br>No bo już mnie nie oszukasz<br>Żyję szybko jakby dla mnie już nie było jutra<br>Przestań mnie już szukać<br>Proszę przestań szukać<br>W moim sercu pustka<br>Nie mów do mnie skarbie<br>No bo już mnie nie oszukasz<br>",
    background: "linear-gradient(#e81e2a, #121212)",
    lyricsBackground: "#e81e2a",
    explicit: "1"
  },
  {
    title: "FANTA",
    artist: "Young Multi, Waima",
    album: "TOXIC",
    src: "music/fanta.mp3",
    cover: "img/toxic.png",
    coverSize: "1200x1200",
    lyrics: "Yeah, yeah, każdy z ziomali jest z innej planety, yeah<br>Cała galaktyka nasza, a niebo fioletowe jest, tak jak Fanta<br>Wyjebałem jak kometa i jestem na topie, a wołają falstart<br>Kokpit zamknięty, niedowiarkom mówię dziś pa-pa (pa-pa)<br>",
    background: "linear-gradient(#e81e2a, #121212)",
    lyricsBackground: "#e81e2a",
    explicit: "1"
  },
  {
    title: "NIGDY NIE ŚPIĘ",
    artist: "Young Multi",
    album: "TOXIC",
    src: "music/nigdy-nie-spie.mp3",
    cover: "img/toxic.png",
    coverSize: "1200x1200",
    lyrics: "Nigdy uh nigdy nie śpię, 24 gang nie jestem skejtem<br>Nigdy uh nigdy nie śpię, robię tą bi big booty w Benzie<br>Nigdy uh nigdy nie śpię, 24 gang nie jestem skejtem<br>Nigdy uh nigdy nie śpię, robię tą bih big booty w Benzie<br>Nigdy uh<br>Pomimo że piękna pani, to nie mogę gonić za nią tak jak berek<br>Love no thotties jak Keef, ale czasami nie myślę już sercem<br>Suko kim ty jesteś, nie mów do mnie kiedy lecę na wavie<br>Psujesz mi mood, odejdź ode mnie i proszę zrób miejsce<br>Moi ziomale to slimes, ty jesteś fake ty jesteś clown<br>Moi ziomale to slimes, wy macie glock my chcemy funk<br>Moi ziomale to slimes, wpierdala w opps dawaj mi guap<br>Moi ziomale to slimes<br>Moi ziomale to gang gang",
    background: "linear-gradient(#e81e2a, #121212)",
    lyricsBackground: "#e81e2a",
    explicit: "1"
  },
  {
    title: "Charger",
    artist: "Chivas",
    album: "nauczyłem się przeklinać",
    src: "music/Charger.mp3",
    cover: "img/charger.png",
    coverSize: "592x592",
    lyrics: "Jestem przyjacielem moich zmartwień, ryczałem jak Charger<br>Już nie ma odwrotu, więc przeżyje lub padnę<br>Rzucili nam kolczatkę, zrobiłem z niej parkiet<br>Nie żałuję żadnych krzywd, napisały bajkę",
    background: "linear-gradient(#46ca40, #121212)",
    lyricsBackground: "#46ca40",
    explicit: "1"
  },
  {
    title: "PAMIĘTAM JAK",
    artist: "Sobel",
    album: "NAPISZ JAK BĘDIESZ",
    src: "music/pamietam-jak.mp3",
    cover: "img/njb.png",
    coverSize: "640x640",
    lyrics: "Pamiętam, yeah (Sushi), sushi nad wodą<br>Tylko po to by się potknąć, wylądować u mnie<br>Pamiętam jak (mówisz), że będziesz obok, choćby mierzyli do nas<br>Jesteś gotów dostać kulkę (Jak dobrze wiedzieć, że)<br>Że żyjesz, o żyjesz, o żyjesz, oh yeah<br>(Jak dobrze wiedzieć, że)<br>Że po tym wszystkim nadal budzisz się tak blisko mnie, yeah",
    background: "linear-gradient(#687c8c, #121212)",
    lyricsBackground: "#687c8c",
    explicit: "1"
  }
];



let currentTrackIndex = 0;
let isShuffle = false;
let isLoop = false;

const audio = document.getElementById("audio");
const playBtn = document.getElementById("play");
const prevBtn = document.getElementById("prev");
const nextBtn = document.getElementById("next");
const playLyr = document.getElementById("play-lyr");
const prevLyr = document.getElementById("prev-lyr");
const nextLyr = document.getElementById("next-lyr");
const seekBar = document.getElementById("seek");
const seekBarLyr = document.getElementById("seek-lyr");
const playMini = document.getElementById("play-mini");
const currentTimeElem = document.getElementById("current-time");
const durationElem = document.getElementById("duration");
const titleElem = document.querySelector("h1");
const artistElem = document.querySelector("h2");
const imgElem = document.getElementById("img1");
const titleElemLyr = document.querySelector("h3");
const artistElemLyr = document.querySelector("h4");
const imgElemLyr = document.getElementById("img2");
const odtwarzanie = document.getElementById("head");
const lyrics = document.getElementById("lyrics-new");
const shuffleBtn = document.getElementById("shuffle");
const loopBtn = document.getElementById("loop");
const loopBtnLyr = document.getElementById("loop-lyr");


let isPlaying = false;

function loadTrack(index) {
  const track = playlist[index];
  audio.src = track.src;
  titleElem.textContent = track.title;
  artistElem.textContent = track.artist;
  imgElem.src = track.cover;
  titleElemLyr.textContent = track.title;
  artistElemLyr.textContent = track.artist;
  imgElemLyr.src = track.cover;
  seekBar.value = 0;
  updateSeekBackground();
  currentTimeElem.textContent = "0:00";
  durationElem.textContent = "0:00";
  odtwarzanie.innerHTML = `
    <div id="go-back"><i class="icon-open"></i></div>
    „${track.album}”
    <div id="more"><i class="icon-more"></i></div>
  `;
  lyrics.innerHTML = `${track.lyrics}`;
  document.getElementById("player-container").style.background = track.background;
  document.querySelector("#mini-track-info h5").textContent = track.title;
  document.querySelector("#mini-track-info h6").textContent = track.artist;
  document.getElementById("img3").src = track.cover;
  document.getElementById('player-mini').style.background = track.lyricsBackground;

  if (`${track.explicit}` == '1') {
    titleElem.innerHTML += '<p id="explicit">🅴</p>';
    titleElemLyr.innerHTML += '<p id="explicit">🅴</p>';
  }

  document.getElementById("lyrics-overlay").style.backgroundColor = track.lyricsBackground;
  document.getElementById("lyrics-new").style.backgroundColor = track.lyricsBackground;
  document.getElementById("song-info").style.backgroundColor = track.lyricsBackground;
  document.getElementById("bottom-bar").style.backgroundColor = track.lyricsBackground;
}

audio.addEventListener("play", () => {
  setMediaMetadata(currentTrackIndex);
});

function setMediaMetadata(index) {
  const track = playlist[index];
  if ('mediaSession' in navigator) {
    navigator.mediaSession.metadata = new MediaMetadata({
      title: track.title,
      artist: track.artist,
      album: track.album,
      artwork: [
        {
          src: `https://jjmusicplayer.github.io/${track.cover}`,
          sizes: track.coverSize || "512x512",
          type: "image/png"
        }
      ]
    });
    navigator.mediaSession.setActionHandler('play', () => {
      playBtn.click();
    });

    navigator.mediaSession.setActionHandler('pause', () => {
      playBtn.click();
    });

    navigator.mediaSession.setActionHandler('previoustrack', () => {
      prevBtn.click();
    });

    navigator.mediaSession.setActionHandler('nexttrack', () => {
      nextBtn.click();
    });
  }
}

function playSong(index) {
  const track = playlist[index];
  audio.src = `${track.src}`;
  audio.play();
  setMediaMetadata(index);
}

function playTrack() {
  audio.play();
  isPlaying = true;
  playBtn.innerHTML = "<i class='icon-pause'></i>";
  playLyr.innerHTML = "<i class='icon-pause'></i>";
  playMini.innerHTML = "<i class='icon-pause'></i>";
}

function pauseTrack() {
  audio.pause();
  isPlaying = false;
  playBtn.innerHTML = "<i class='icon-play'></i>";
  playLyr.innerHTML = "<i class='icon-play'></i>";
  playMini.innerHTML = "<i class='icon-play'></i>";
}

playBtn.addEventListener("click", () => {
  if (isPlaying) {
    pauseTrack();
  } else {
    playTrack();
  }
});

nextBtn.addEventListener("click", () => {
  currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
  loadTrack(currentTrackIndex);
  playTrack();
});

prevBtn.addEventListener("click", () => {
  currentTrackIndex = (currentTrackIndex - 1 + playlist.length) % playlist.length;
  loadTrack(currentTrackIndex);
  playTrack();
});

playLyr.addEventListener("click", () => {
  if (isPlaying) {
    pauseTrack();
  } else {
    playTrack();
  }
});

nextLyr.addEventListener("click", () => {
  currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
  loadTrack(currentTrackIndex);
  playTrack();
});

prevLyr.addEventListener("click", () => {
  currentTrackIndex = (currentTrackIndex - 1 + playlist.length) % playlist.length;
  loadTrack(currentTrackIndex);
  playTrack();
});

playMini.addEventListener("click", () => {
  if (isPlaying) {
    pauseTrack();
  } else {
    playTrack();
  }
});

audio.addEventListener("ended", () => {
  if (isLoop) {
    audio.currentTime = 0;
    playTrack();
  } else if (isShuffle) {
    let newIndex;
    do {
      newIndex = Math.floor(Math.random() * playlist.length);
    } while (newIndex === currentTrackIndex && playlist.length > 1);
    currentTrackIndex = newIndex;
    loadTrack(currentTrackIndex);
    playTrack();
  } else {
    currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
    loadTrack(currentTrackIndex);
    playTrack();
  }
});

audio.addEventListener("timeupdate", () => {
  const percentage = (audio.currentTime / audio.duration) * 100 || 0;
  seekBar.value = percentage;
  seekBarLyr.value = percentage;
  updateSeekBackground();
  currentTimeElem.textContent = formatTime(audio.currentTime);
  durationElem.textContent = formatTime(audio.duration);
});

shuffleBtn.addEventListener("click", () => {
  isShuffle = !isShuffle;
  shuffleBtn.querySelector("i").classList.toggle("active", isShuffle);
});

loopBtn.addEventListener("click", () => {
  isLoop = !isLoop;
  loopBtn.querySelector("i").classList.toggle("active", isLoop);
});

loopBtnLyr.addEventListener("click", () => {
  isLoop = !isLoop;
  loopBtn.querySelector("i").classList.toggle("active", isLoop);
});

seekBar.addEventListener("input", () => {
  audio.currentTime = (seekBar.value / 100) * audio.duration;
  updateSeekBackground();
});

seekBarLyr.addEventListener("input", () => {
  audio.currentTime = (seekBar.value / 100) * audio.duration;
  updateSeekBackground();
});

function updateSeekBackground() {
  const value = seekBar.value;
  seekBar.style.background = `linear-gradient(to right, #ededed ${value}%, rgba(237, 237, 237, 0.1) ${value}%)`;
  seekBarLyr.style.background = `linear-gradient(to right, #ededed ${value}%, rgba(237, 237, 237, 0.1) ${value}%)`;
}

function formatTime(time) {
  if (isNaN(time)) return "0:00";
  const minutes = Math.floor(time / 60);
  const seconds = Math.floor(time % 60);
  return `${minutes}:${seconds.toString().padStart(2, "0")}`;
}

document.addEventListener('keydown', (e) => {
  if (e.code === 'Space') {
    playBtn.click();
  }
  if (e.code === 'ArrowRight') {
    nextBtn.click();
  }
  if (e.code === 'ArrowLeft') {
    prevBtn.click();
  }
});

document.addEventListener("DOMContentLoaded", function () {
  document.getElementById("lyrics")?.addEventListener('click', function () {
    document.getElementById("lyrics-overlay")?.classList.toggle('hidden');
  });

  document.getElementById("hide-lyrics")?.addEventListener('click', function () {
    document.getElementById("lyrics-overlay")?.classList.toggle('hidden');
  });

  document.getElementById("player-mini")?.addEventListener('click', function () {
    document.getElementById("player-container")?.classList.toggle('hidden');
    document.getElementById("container").classList.toggle('hidden');
  });

  document.getElementById("img3")?.addEventListener('click', function () {
    document.getElementById("player-container")?.classList.toggle('hidden');
    document.getElementById("container").classList.toggle('hidden');
  });

  document.getElementById("head")?.addEventListener('click', function (e) {
    if (e.target.closest("#go-back")) {
      document.getElementById("player-container")?.classList.toggle("hidden");
      document.getElementById("container").classList.toggle('hidden');
    }
  });
});

loadTrack(currentTrackIndex);